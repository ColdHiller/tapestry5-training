<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns:t="http://tapestry.apache.org/schema/tapestry_5_1_0.xsd">

	<head>
		<meta name="copyright" content="Atos Origin" />
		<title>Page principale de l'application</title>
		<link href="${asset:context:static/css/style.css}" rel="stylesheet" type="text/css" />
	</head>

	<body>

		<div t:type="menu" t:listOfActions="loggedUser.actions"></div>

		<div id="main">
		<p>Bonjour Mr <b>${loggedUser.login}</b>.</p>

		<p>Voici la liste de vos portefeuilles :</p>

		<div t:type="delegate" t:to="porfoliosGrid"></div>

		<br/>

		<!-- Define blocks for view and edit mode -->
		<t:block id="simpleList">
		
			<p><a t:type="actionlink" t:id="advanced">Advanced Grid</a></p>
			
			<table border="1" cellpadding="0" cellspacing="0" class="t-data-grid">
	
				<thead>
				<tr>
					<th align="center" class="label-header">Label</th>
					<th align="center" class="amount-header">Amount</th>
					<th align="center" class="bookingDate-header">Booking date</th>
									
				</tr>
				</thead>
	
				<tr t:type="loop" t:index="index" t:source="loggedUser.portfolios" t:value="currentPortfolio" class="${rowClass}">
					<td align="center" class="label-cell">${currentPortfolio.label}</td>
					<td align="center" class="amount-cell">${currentPortfolio.amount}</td>
					<td class="bookingDate-cell" t:type="output" t:value="currentPortfolio.bookingDate" t:format="dateFormat" align="center"></td>
				</tr>
			</table>
		</t:block>
		
		<t:block id="advancedList">
			<p><a t:type="actionlink" t:id="simple">Simple Grid</a></p>
			
			<table t:type="grid" t:source="loggedUser.portfolios" t:rowIndex="index"  t:row="currentPortfolio" t:pagerPosition="top" t:rowsPerPage="3" t:rowClass="rowClass">
			
				<t:parameter name="bookingDateCell">
					<t:output t:value="currentPortfolio.bookingDate" t:format="dateFormat" />
				</t:parameter>

			</table>
			
		</t:block>
		</div>
		<div>_Footer_</div>
		
	</body>

</html>
